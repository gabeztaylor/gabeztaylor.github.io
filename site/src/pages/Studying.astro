---
import BaseLayout from "../layouts/BaseLayout.astro";
import { loadPageByPermalink } from "../lib/jekyllContent.js";

const page = loadPageByPermalink("/Studying");
---

<BaseLayout title={page?.title || "Studying"}>
  <section class="card page">
    <div class="content" set:html={page?.html || "<p>Studying page not found.</p>"} />
  </section>
</BaseLayout>

<style>
  .page { padding: 18px; }
  .content :global(.study-day) { margin: 16px 0; overflow: hidden; }
  .content :global(.study-day img) {
    max-width: 100%;
    height: auto;
    display: block;
  }
  .content :global(details.tagGroup) {
    border: 1px solid var(--border);
    border-radius: 14px;
    background: var(--surface);
    padding: 10px 12px;
    margin: 12px 0;
  }
  .content :global(details.tagGroup summary) {
    list-style: none;
    cursor: pointer;
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    gap: 10px;
    font-weight: 900;
    color: var(--text);
    padding: 6px 4px;
  }
  .content :global(details.tagGroup summary::-webkit-details-marker) { display: none; }
  .content :global(.tagTitle) { font-size: 16px; }
  .content :global(.tagMeta) { display: inline-flex; gap: 8px; align-items: center; }
  .content :global(.tagTotal),
  .content :global(.tagCount) {
    font-size: 12px;
    color: var(--muted);
    border: 1px solid var(--border);
    background: var(--surface2);
    padding: 4px 8px;
    border-radius: 999px;
    white-space: nowrap;
  }
  .content :global(details.tagGroup[open] ul) { margin-top: 10px; }
</style>

<script is:inline>
  function openIfTagHash() {
    const hash = location.hash || "";
    if (!hash.startsWith("#tag-")) return;
    const el = document.getElementById(hash.slice(1));
    if (el && el.tagName === "DETAILS") {
      el.open = true;
      // Let the browser scroll to it first, then stabilize layout
      setTimeout(() => el.scrollIntoView({ block: "start" }), 0);
    }
  }
  window.addEventListener("hashchange", openIfTagHash);
  openIfTagHash();
</script>

